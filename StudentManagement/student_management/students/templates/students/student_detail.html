{% extends 'students/base.html' %}

{% block title %}{{ student.name }} - 学生详情{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2 class="mb-4">{{ student.name }} - 学生详情</h2>
    
    <div class="row">
        <!-- 学生照片 -->
        <div class="col-md-3 mb-4">
            <div class="card">
                <div class="card-body text-center">
                    {% if student.photo %}
                        <img src="{{ student.photo.url }}" alt="{{ student.name }}的照片" class="img-fluid rounded mb-3" style="max-height: 200px;">
                    {% else %}
                        <i class="fas fa-user-circle" style="font-size: 120px; color: #ccc;"></i>
                    {% endif %}
                    <h5 class="card-title">{{ student.name }}</h5>
                    <p class="card-text text-muted">{{ student.student_id }}</p>
                </div>
            </div>
        </div>
        
        <!-- 学生基本信息 -->
        <div class="col-md-9">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">基本信息</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <p><strong>学号:</strong> {{ student.student_id }}</p>
                            <p><strong>姓名:</strong> {{ student.name }}</p>
                            <p><strong>性别:</strong> {{ student.get_gender_display }}</p>
                            <p><strong>出生日期:</strong> {{ student.date_of_birth|date:"Y年m月d日" }}</p>
                            <p><strong>民族:</strong> {{ student.ethnicity }}</p>
                            <p><strong>政治面貌:</strong> {{ student.get_political_status_display }}</p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>专业:</strong> {{ student.major }}</p>
                            <p><strong>班级:</strong> {{ student.class_name }}</p>
                            <p><strong>学籍状态:</strong> {{ student.get_status_display }}</p>
                            <p><strong>入学日期:</strong> {{ student.enrollment_date|date:"Y年m月d日" }}</p>
                            <p><strong>身份证号:</strong> {{ student.id_card|default:'未填写' }}</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 联系方式 -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">联系方式</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <p><strong>邮箱:</strong> <a href="mailto:{{ student.email }}">{{ student.email }}</a></p>
                            <p><strong>电话:</strong> <a href="tel:{{ student.phone }}">{{ student.phone }}</a></p>
                            <p><strong>地址:</strong> {{ student.address|default:'未填写' }}</p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>紧急联系人:</strong> {{ student.emergency_contact|default:'未填写' }}</p>
                            <p><strong>紧急联系人电话:</strong> {{ student.emergency_phone|default:'未填写' }}</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 备注信息 -->
            {% if student.notes %}
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">备注</h5>
                </div>
                <div class="card-body">
                    <p>{{ student.notes }}</p>
                </div>
            </div>
            {% endif %}
            
            <!-- 系统信息 -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">系统信息</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <p><strong>创建时间:</strong> {{ student.created_at|date:"Y年m月d日 H:i:s" }}</p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>更新时间:</strong> {{ student.updated_at|date:"Y年m月d日 H:i:s" }}</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 操作按钮 -->
            <div class="actions d-flex justify-content-between">
                <div>
                    <a href="{% url 'student-update' student.student_id %}" class="btn btn-primary mr-2">
                        <i class="fas fa-edit"></i> 编辑
                    </a>
                    <a href="{% url 'student-delete' student.student_id %}" class="btn btn-danger">
                        <i class="fas fa-trash"></i> 删除
                    </a>
                </div>
                <a href="{% url 'student-list' %}" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i> 返回列表
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}