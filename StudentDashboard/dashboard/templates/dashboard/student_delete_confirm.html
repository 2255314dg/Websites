{% extends 'dashboard/base.html' %}

{% block title %}删除学生 - 学生返校数据仪表盘{% endblock %}

{% block content %}
    <!-- Dashboard Header -->
    <header class="dashboard-header pt-5 mt-5">
        <div class="container">
            <h1><i class="fa fa-trash"></i> 删除学生信息</h1>
            <p>确认删除学生{{ student.name }}的信息</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mt-4">
        <!-- Back Button -->
        <div class="mb-4">
            <a href="{% url 'student_detail' student.id %}" class="btn btn-secondary">
                <i class="fa fa-arrow-left"></i> 返回学生详情
            </a>
        </div>

        <!-- Delete Confirmation Card -->
        <div class="card fade-in">
            <div class="card-header bg-danger text-white">
                <h5 class="card-title mb-0"><i class="fa fa-exclamation-triangle"></i> 确认删除</h5>
            </div>
            <div class="card-body">
                <div class="alert alert-danger" role="alert">
                    <h4 class="alert-heading">警告！</h4>
                    <p>您正在尝试删除学生 <strong>{{ student.name }}</strong> (学号: {{ student.student_id }}) 的信息。此操作不可恢复！</p>
                    <hr>
                    <p class="mb-0">请确认是否要继续删除此学生信息。</p>
                </div>
                
                <div class="row mb-3">
                    <div class="col-md-6">
                        <h6>学生基本信息</h6>
                        <ul class="list-unstyled">
                            <li><strong>姓名:</strong> {{ student.name }}</li>
                            <li><strong>学号:</strong> {{ student.student_id }}</li>
                            <li><strong>性别:</strong> {% if student.gender == 'male' %}男{% else %}女{% endif %}</li>
                            <li><strong>年级:</strong> 
                                {% if student.class_status == 'freshman' %}大一
                                {% elif student.class_status == 'sophomore' %}大二
                                {% elif student.class_status == 'junior' %}大三
                                {% elif student.class_status == 'senior' %}大四
                                {% else %}{{ student.class_status }}
                                {% endif %}
                            </li>
                            <li><strong>专业:</strong> 
                                {% if student.major == 'computer' %}计算机科学与技术
                                {% elif student.major == 'electronics' %}电子信息工程
                                {% elif student.major == 'mechanical' %}机械工程
                                {% elif student.major == 'civil' %}土木工程
                                {% elif student.major == 'business' %}工商管理
                                {% elif student.major == 'medicine' %}临床医学
                                {% else %}{{ student.major }}
                                {% endif %}
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6>返校信息</h6>
                        <ul class="list-unstyled">
                            <li><strong>返校状态:</strong> 
                                {% if student.return_status == 'returned' %}已返校
                                {% elif student.return_status == 'not_returned' %}未返校
                                {% elif student.return_status == 'delayed' %}延期返校
                                {% else %}{{ student.return_status }}
                                {% endif %}
                            </li>
                            {% if student.return_time %}
                            <li><strong>返校时间:</strong> {{ student.return_time|date:'Y-m-d H:i:s' }}</li>
                            {% endif %}
                            {% if student.return_method %}
                            <li><strong>返校方式:</strong> 
                                {% if student.return_method == 'train' %}火车
                                {% elif student.return_method == 'plane' %}飞机
                                {% elif student.return_method == 'bus' %}汽车
                                {% elif student.return_method == 'private_car' %}私家车
                                {% elif student.return_method == 'other' %}其他
                                {% else %}{{ student.return_method }}
                                {% endif %}
                            </li>
                            {% endif %}
                        </ul>
                    </div>
                </div>
                
                <!-- Confirmation Buttons -->
                <div class="text-center">
                    <form method="post" class="d-inline">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-danger btn-lg me-3">
                            <i class="fa fa-trash"></i> 确认删除
                        </button>
                    </form>
                    <a href="{% url 'student_detail' student.id %}" class="btn btn-secondary btn-lg">
                        <i class="fa fa-times"></i> 取消
                    </a>
                </div>
            </div>
        </div>
    </main>

    {% block extra_js %}
    <script>
        // Add click confirmation
        document.addEventListener('DOMContentLoaded', function() {
            const deleteBtn = document.querySelector('.btn-danger');
            
            deleteBtn.addEventListener('click', function(e) {
                if (!confirm('确定要删除此学生信息吗？此操作不可恢复！')) {
                    e.preventDefault();
                }
            });
        });
    </script>
    {% endblock %}
{% endblock %}